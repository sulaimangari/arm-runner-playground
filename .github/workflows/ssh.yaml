name: ssh
on: workflow_dispatch

jobs:
  ssh:
    runs-on: ubuntu-24.04-arm

    steps:
    - uses: actions/checkout@v4

    - name: run tunnel
      run: |
        sudo apt install openssh-server
        URL="https://api.github.com/repos/ekzhang/bore/releases/latest"
        curl -s $URL | awk -F\" '/browser_download_url.*-x86_64-unknown-linux-musl.tar.gz/{system("curl -OL " $(NF-1))}'
        bsdtar -xf *.tar.gz
        cp bore /usr/bin/bore
        exec bash
        bore local 22 --to bore.pub
    
